# 해시 조인
해시 조인은 해시 테이블을 기반으로 조인하는 방법이다. 두 개의 테이블을 조인한다고 했을 때 하나의<br/> 테이블이 메모리에 온전히 들어간다면 보통 중첩 루프 조인보다 더 효율적이다. 또한 동등 조인에서만 사용할 수 있다.<br/>
MySQL의 경우 MySQL 8.0.18 릴리즈와 함께 이 기능을 사용할 수 있게 되었으며 이를 기반으로 해시 조인의 과정을 살펴보자.<br/>
MySQL의 해시 조인 단계는 빌드 단계, 프로브 단계로 나뉜다.<br/>
<br/>

###### 빌드 단계
빌드 단계는 입력 테이블 중 하나를 기반으로 메모리 내 해시 테이블을 빌드하는 단계이다.<br/>
예를 들어 persons와 countries라는 테이블을 조인한다고 했을 때 둘 중에 바이트가 더 작은 테이블을 기반으로 해서 테이블을 빌드한다.<br/>
또한, 조인에 사용되는 필드가 해시 테이블의 키로 사용된다.<br/>

###### 프로브 단계
프로브 단계 동안 레코드 읽기를 시작하며, 각 레코드에서 테이블의 키에 일치하는 레코드를 찾아서 결과 값으로 변환한다.<br/>
이를 통해 각 테이블은 한 번씩만 읽게 되어 중첩해서 두 개의 테이블을 읽는 중첩 루프 조인보다 보통은 성능이 더 좋다.<br/>
참고로 사용 가능한 메모리양은 시스템 변수 join_buffer_size에 의해 제어되며, 런타임 시에 조정할 수 있다.
