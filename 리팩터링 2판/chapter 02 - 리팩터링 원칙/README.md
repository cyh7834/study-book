# 리팩터링 원칙
이 책에서 '리팩터링'은 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법이라고 정의한다. 코드 베이스를 정리하거나 구조를 바꾸는 모든 작업을 '재구성' 이라는 포괄적인 용어로 표현하고, 리팩터링은 재구성 중 특수한 하나의 형태로 생각한다. 한 번에 바꿀 수 있는 작업을 수많은 단계로 잘게 나눠서 작업하는 모습을 처음 접하면 리팩터링하는 것이 오히려 비효율적이라고 생각하기 쉽다. 하지만 이렇게 잘게 나눔으로써 오히려 작업을 더 빨리 처리할 수 있다. 단계들이 체계적으로 구성되어 있기도 하고 무엇보다 디버깅하는 데 시간을 뺏기지 않기 때문이다.
### 리팩터링은 소프트웨어 설계를 좋게 만든다
리팩터링을 하지 않은채 기능 구현에만 집중하여 코드를 추가하거나 수정하다보면 기반 구조가 무너지기 쉽다. 그 결과로 코드만 봐서는 설계를 파악하기 어려워지고, 설계가 복잡한 구조로 바뀌는 악효과가 일어난다.
### 리팩터링은 코드를 이해하기 쉽게 만들어주고, 기능 추가, 버그 수정을 
리팩터링을 통해 간결해진 설계와 코드는 기능 추가와 버그 수정에 용이하다.
### 리팩터링하지 말아야 할 때
코드가 지저분하더라도 외부 API 다루듯 호출해서 쓰는 코드라면 리팩터링을 하지 않고 추후에 내부 동작을 이해해야 할 시점에 리팩터링한다. 또한 리팩터링하는 것보다 처음부터 새로 작성하는게 쉬울 때도 리팩터링하지 않는다.
### 브랜치 기반 코드 통합
리팩터링을 하다 보면 코드베이스 전반에 걸쳐 자잘하게 수정하는 부분이 많을 때가 있다. 그 이유로 필자는 지속적 통합(continuous integration, CI)을 통해 짧은 주기로 마스터 브랜치와 통합하는 개발 환경이 리팩터링과 가장 적합하다고 주장한다.
### 테스트 코드 작성
리팩터링 도중 실수하더라도 재빨리 해결하면 문제가 되지 않는다. 실수의 원인을 못 찾더라도 버전 관리 시스템을 통해 최근에 정상 작동하던 코드로 되돌리면 된다. 핵심은 오류를 재빨리 잡는 것이다. 테스트 코드 작성은 개발 과정에서 추가적으로 시간 소요가 되지만 리팩터링 하거나 새 기능을 추가할 때도 훨씬 안전하게 진행할 수 있도록 도와준다.
